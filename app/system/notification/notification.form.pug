doctype html
include /resources/angle/pug/mixins/form


div(  
  ng-if="!notificationForm.isCreationMode"
)
  +label(
    "{{ 'system.notification.form.name.LABEL' | translate }}"
  )
    p.form-control-static {{ notificationForm.input.name }}
div(  
  ng-if="notificationForm.isCreationMode"
)
+label("system.notification.form.engine.LABEL")
  +ui-select(ng-model="notificationForm.input.engine")
    ui-select-match(placeholder="{{ 'system.notification.form.engine.PLACEHOLDER' | translate }}")
      span(ng-bind="$select.selected.name")

    ui-select-choices(
      repeat="engine in notificationForm.engines track by engine.id"
      refresh="notificationForm.server.load($select.search)"
      refresh-delay="400"
    )
      span(ng-bind-html="engine.name | highlight: $select.search")
div(ng-if="notificationForm.input.engine != null")
  +field(
    "{{ 'system.notification.form.name.LABEL' | translate }}"
  )(
    placeholder="{{ 'system.notification.form.name.PLACEHOLDER' | translate }}"
    ng-model="notificationForm.input.name"
  )
div(ng-if="notificationForm.input.engine.id == 1")
  +field(
    "{{ 'system.notification.form.engine.slack.token.LABEL' | translate }}"
  )(
    placeholder="{{ 'system.notification.form.engine.slack.token.PLACEHOLDER' | translate }}"
    ng-model="notificationForm.input.slack.token"
  )
  +field(
    "{{ 'system.notification.form.engine.slack.channels.LABEL' | translate }}"
  )(
    placeholder="{{ 'system.notification.form.engine.slack.channels.PLACEHOLDER' | translate }}"
    ng-model="notificationForm.input.slack.channels"
  )
div(ng-if="notificationForm.input.engine.id == 2")
  +field(
    "{{ 'system.notification.form.engine.email.email.LABEL' | translate }}"
  )(
    placeholder="{{ 'system.notification.form.engine.email.email.PLACEHOLDER' | translate }}"
    ng-model="notificationForm.input.email.emails"
  )
div(ng-if="notificationForm.input.engine != null")
  +label("{{ 'system.notification.form.notificableEvent.LABEL' | translate }}")
    +ui-select("notificationForm.notificableEvents")(
      multiple,
      theme="bootstrap",
      close-on-select="false"
    )
      ui-select-match(placeholder="{{ 'system.notification.form.notificableEvent.LABEL' | translate }}")
        | {{ $item.name }}

      ui-select-choices(
        repeat='notificableEvent in (' + 'notificationForm.notificableEvents.items |' + 'filter: {name: $select.search} |' + 'filter: notificationForm.notificableEvents.notSelected' + ') track by notificableEvent.id',
        refresh="notificationForm.notificableEvents.load($select.search)",
        refresh-delay="400"
      )
        div(ng-bind-html="notificableEvent.name | highlight: $select.search")
          small servers: {{ notificableEvent.serversCount }}